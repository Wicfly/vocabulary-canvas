# 故障排除指南

## 拍照功能错误

### 问题：拍照后显示 "Failed to process image. Please try again."

#### 原因分析

这个错误通常出现在以下情况：

1. **SAM 3D API 未配置**（最常见）
   - 没有在 `.env` 文件中配置任何 SAM 3D API
   - 这是正常的，应用会自动使用照片作为普通图片

2. **API 配置错误**
   - API 端点配置不正确
   - API 密钥无效
   - 网络连接问题

3. **其他错误**
   - 图片识别失败
   - 单词分类失败
   - 定义获取失败

#### 解决方案

### 方案 1：使用照片作为普通图片（推荐，无需配置）

即使没有配置 SAM 3D API，应用也会自动将照片作为普通图片添加到画布上。这是默认行为，不需要任何配置。

**优点：**
- ✅ 无需配置任何 API
- ✅ 立即可以使用
- ✅ 照片会正常显示在画布上

**缺点：**
- ❌ 照片不会转换为 3D 模型
- ❌ 物体名称会是默认的 "Photo"

### 方案 2：配置 SAM 3D API（需要 API 配置）

如果您想要 3D 模型功能，请按照以下步骤配置：

#### 步骤 1：创建 `.env` 文件

在项目根目录创建 `.env` 文件（如果还没有）。

#### 步骤 2：选择一种 API 配置方式

**选项 A：自定义后端 API**
```env
VITE_SAM3D_API_URL=https://your-backend-url.com/api/sam3d
```

**选项 B：Hugging Face API**
```env
VITE_HF_API_TOKEN=your_huggingface_token
VITE_HF_SAM3D_MODEL_ID=facebook/sam-3d
```

**选项 C：Replicate API**
```env
VITE_REPLICATE_API_TOKEN=your_replicate_token
```

#### 步骤 3：重启开发服务器

```bash
# 停止当前服务器 (Ctrl+C)
# 然后重新启动
npm run dev
```

### 方案 3：查看详细错误信息

1. 打开浏览器开发者工具（按 F12）
2. 切换到 "Console"（控制台）标签
3. 查看红色错误信息
4. 错误信息会显示具体的问题

### 常见错误信息

| 错误信息 | 含义 | 解决方案 |
|---------|------|---------|
| `SAM 3D API is not configured` | API 未配置 | 这是正常的，照片会作为普通图片添加 |
| `API error: 404` | API 端点不存在 | 检查 API URL 是否正确 |
| `API error: 401` | API 密钥无效 | 检查 API 密钥是否正确 |
| `API error: 500` | 服务器错误 | 检查后端服务是否正常运行 |
| `Network error` | 网络连接失败 | 检查网络连接 |

## 当前状态

如果您看到以下情况，说明一切正常：

1. ✅ 拍照后照片出现在画布上（即使显示为普通图片）
2. ✅ 没有错误提示（或只有轻微的信息提示）
3. ✅ 可以正常使用所有功能

## 下一步

- 如果照片正常显示：✅ 功能正常工作，无需额外配置
- 如果想要 3D 模型：请查看 `SAM3D_SETUP.md` 配置 API
- 如果仍有问题：请查看浏览器控制台的详细错误信息

## 需要帮助？

1. 查看 `SAM3D_SETUP.md` 了解 API 配置
2. 查看浏览器控制台的错误信息
3. 检查 `.env` 文件配置是否正确


